---
title: "ะงัะพ ัะฐะบะพะต Yield ะธ Yield_Self ะฒ Ruby"
category:
 - Ruby
tags:
 - Ruby on Rails
---

Yield โ ััะพ ะบะปััะตะฒะพะต ัะปะพะฒะพ (ัะพ ะตััั ััะพ ะพัะฝะพะฒะฝะฐั ัะฐััั ัะทัะบะฐ), ะบะพัะพัะพะต ะธัะฟะพะปัะทัะตััั ะฒะฝัััะธ ะผะตัะพะดะพะฒ ะดะปั ะฒัะทะพะฒะฐ ะฑะปะพะบะฐ.

ะััะณะธะผะธ ัะปะพะฒะฐะผะธ, yieldััะพ ะฟัะธะพััะฐะฝะพะฒะบะฐ ะฝะฐัะตะณะพ ะผะตัะพะดะฐ ะธ ะฟะตัะตะดะฐัะฐ ัะฟัะฐะฒะปะตะฝะธั ะฑะปะพะบั, ััะพะฑั ะพะฝ ะผะพะณ ะฒัะฟะพะปะฝะธัั ัะฒะพั ะทะฐะดะฐัั, 
ะฐ ะทะฐัะตะผ ะฒะตัะฝััััั ั ะฒะพะทะฒัะฐัะฐะตะผัะผ ะทะฝะฐัะตะฝะธะตะผ.

**ะะพั ััะพ ะฒะฐะผ ะฝัะถะฝะพ ะทะฝะฐัั :**

- ะัะทะพะฒ ะฑะปะพะบะฐ ะทะฐะฟััะบะฐะตั ะบะพะด ะฒะฝัััะธ ััะพะณะพ ะฑะปะพะบะฐ (ะบะฐะบ ะฒัะทะพะฒ ะผะตัะพะดะฐ).
- Yield ะผะพะถะตั ะฟะตัะตะดะฐะฒะฐัั ะฒ ะฑะปะพะบ ะปัะฑะพะต ะบะพะปะธัะตััะฒะพ ะฐัะณัะผะตะฝัะพะฒ.
- ะะพะทะฒัะฐัะฐะตะผะพะต ะทะฝะฐัะตะฝะธะต ะฑะปะพะบะฐ ััะฐะฝะพะฒะธััั ะฒะพะทะฒัะฐัะฐะตะผัะผ ะทะฝะฐัะตะฝะธะตะผ ะดะปั yield.

ะั ะผะพะถะตัะต ะดัะผะฐัั ะพ ะฑะปะพะบะฐั ะบะฐะบ ะพ ะผะตัะพะดะฐั ะฑะตะท ะธะผะตะฝ, ะบะพัะพััะต ะผะพะถะฝะพ ะฟะตัะตะดะฐะฒะฐัั ะฒ ะบะฐัะตััะฒะต 
(ะฝะตัะฒะฝัั) ะฐัะณัะผะตะฝัะพะฒ ะดััะณะธะผ ะผะตัะพะดะฐะผ.

```ruby
def make_salad
  yield "lettuce"
  yield "carrots"
  yield "olive oil"
end
make_salad { |ingredient| puts "Adding #{ingredient} to salad!" 
}
```
ะะดะตัั ะผั ะพะฟัะตะดะตะปัะตะผ ะผะตัะพะด make_salad. ะะฑัะฐัะธัะต ะฒะฝะธะผะฐะฝะธะต, ััะพ ะฒ ััะพะผ ะฟัะธะผะตัะต ะพะฝ ะฝะต ะฟัะธะฝะธะผะฐะตั ะฝะธะบะฐะบะธั ะฐัะณัะผะตะฝัะพะฒ,
ะฝะพ ะผะพะถะตั ัะฐะฑะพัะฐัั ัะฐะบ ะถะต, ะบะฐะบ ะธ ะปัะฑัะต ะดััะณะธะต ะผะตัะพะดั.

ะะฐัะตะผ ะผั ะฒัะทัะฒะฐะตะผ ััะพั ะผะตัะพะด ะธ ะพัะฟัะฐะฒะปัะตะผ ะฑะปะพะบ (ะฒัะต, ััะพ ะทะฐะบะปััะตะฝะพ ะฒ ัะธะณััะฝัะต ัะบะพะฑะบะธ {}).

ะะตะทัะปััะฐัะพะผ ะฟัะธะฒะตะดะตะฝะฝะพะณะพ ะฒััะต ะบะพะดะฐ ัะฒะปัะตััั ัะปะตะดัััะธะน ะฒัะฒะพะด :
```ruby
Adding lettuce to salad!
Adding carrots to salad!
Adding olive oil to salad!
```
ะ ััะพะผ ัััั ัะพะณะพ, ััะพ ะดะตะปะฐะตั yield: ะผะตัะฐะฝะธะบะฐ ะฐะฝะฐะปะพะณะธัะฝะฐ ะฒัะทะพะฒั ะปัะฑะพะณะพ ะดััะณะพะณะพ ะผะตัะพะดะฐ,
ะฝะพ ะฟะพะทะฒะพะปัะตั ะฟะตัะตะดะฐะฒะฐัั ััะฝะบัะธั ะฒ ะบะฐัะตััะฒะต ะฐัะณัะผะตะฝัะฐ, ะฐ ะฝะต ัะพะปัะบะพ ะดะฐะฝะฝัะต.

ะะฐะฒะฐะนัะต ะฟะพัะผะพััะธะผ, ััะพ ะฟัะพะธะทะพะนะดะตั, ะตัะปะธ ั ะฒะฐั ะฝะตั ะฑะปะพะบะฐ ะดะปั ะฒัะทะพะฒะฐ.

ะััะพะด ะฑะตะท ะฑะปะพะบะฐ (ะพัะธะฑะบะฐ ะฟัะธ ะพััััััะฒะธะธ ะฑะปะพะบะฐ)
ะัะปะธ ะฒั ัะดะตะปะฐะตัะต ะฒัะทะพะฒ yield ะฑะตะท ะฑะปะพะบะฐ, ัะพ ะฟะพะปััะธัะต ะพัะธะฑะบั .

ะัะธะผะตั :
```ruby
def write_code
  yield
end
write_code
# LocalJumpError: no block given (yield)
```
ะญัะฐ ะพัะธะฑะบะฐ ัะพะฒะตััะตะฝะฝะพ ะพัะตะฒะธะดะฝะฐ: ยซะฑะปะพะบ ะฝะต ัะบะฐะทะฐะฝยป ะพะทะฝะฐัะฐะตั, ััะพ ะฒัะทะพะฒ ะผะตัะพะดะฐ write_codeะฝะต ะฟัะตะดะพััะฐะฒะปัะตั ะฑะปะพะบ, ะบะพัะพััะน ะฝะตะพะฑัะพะดะธะผ ะดะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั yield.

ะะฐะบ ะฒั ะผะพะถะตัะต ะฟัะตะดะพัะฒัะฐัะธัั ััั ะพัะธะฑะบั?

ะขะฐะบ:
```ruby
def write_code
  yield if block_given?
end
```
ะะตัะพะด block_given?ะฟัะพะฒะตััะตั, ะดะพัััะฟะตะฝ ะปะธ ะฑะปะพะบ, ะธ ััะพ ะฟะพะทะฒะพะปัะตั ะฒะฐะผ ัะดะตะปะฐัั ััะพ ัะพะปัะบะพ yieldะฒ ัะพะผ ัะปััะฐะต, ะตัะปะธ ััะพ ะฟัะฐะฒะดะฐ.

### ะะฐัะตะผ ะธัะฟะพะปัะทะพะฒะฐัั yield?

ะั ะธัะฟะพะปัะทัะตะผ ะฑะปะพะบะธ ะดะปั ะฟะตัะตะดะฐัะธ ััะฐะณะผะตะฝัะพะฒ ะบะพะดะฐ ะบะฐะบ ัะฐััะธ ะฒัะทะพะฒะฐ ะผะตัะพะดะฐ.

**ะญัะพ ะฟะพะปะตะทะฝะพ, ะบะพะณะดะฐ :**

- ะั ัะพัะธัะต ะฝะฐะฟะธัะฐัั ะพะฑััั ััะฝะบัะธั ะถััะฝะฐะปะธัะพะฒะฐะฝะธั, ะบะพัะพัะฐั ัะตะณะธัััะธััะตั, ัะบะพะปัะบะพ ะฒัะตะผะตะฝะธ ััะตะฑัะตััั ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ััะฐะณะผะตะฝัะฐ ะบะพะดะฐ.
- ะั ัะพัะธัะต ะทะฐะฟัััะธัั ะฝะตะบะพัะพััะน ะบะพะด ะฟะพัะปะต ะทะฐะฒะตััะตะฝะธั ะผะตัะพะดะฐ (ะฝะฐะฟัะธะผะตั, ยซะพะฑัะฐัะฝัะต ะฒัะทะพะฒัยป ะฒ Javascript).
- ะะฐะผ ะฝัะถะตะฝ ยซะปะตะฝะธะฒัะน ะบะพะดยป, ะบะพะด, ะบะพัะพััะน ะทะฐะฟััะบะฐะตััั ัะพะปัะบะพ ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะธ ะบะพัะพััะน ะผะพะถะตั ะฑััั ะฝะฐัััะพะตะฝ ะฟะพะปัะทะพะฒะฐัะตะปะตะผ.

### Yield_Self โ ะฒ ัะตะผ ัะฐะทะฝะธัะฐ?

ะั ะผะพะถะตัะต ะฟะพะดัะผะฐัั, ััะพ yield_self ัะฒัะทะฐะฝ ั yield.

ะั, ััะพ ะฝะต ัะฐะบ.

ะัะธะผะตะฝะตะฝะธะต yield(self) ะธ self ะพัะปะธัะฐะตััั, ะฟะพัะบะพะปัะบั self ะพัะฝะพัะธััั ะบ ัะตะบััะตะผั ะพะฑัะตะบัั.

ะ ะฒะพั yield_self, ะดะพะฑะฐะฒะปะตะฝะฝัะน ะฒ Ruby 2.5 , ะพัะฝะพัะธััั ะบ ะพะฑัะตะบัั, ะดะปั ะบะพัะพัะพะณะพ ะผั ะฒัะทัะฒะฐะตะผ ะผะตัะพะด.

ะฅะพัะพัะตะต ะฟัะธะผะตะฝะตะฝะธะต ััะพะณะพ ะผะตัะพะดะฐ?

ะัะฟะพะปัะทัะนัะต ะตะณะพ ะฒััะบะธะน ัะฐะท, ะบะพะณะดะฐ ะฒั ัะพัะธัะต ะพะฑัะตะดะธะฝะธัั ะผะตัะพะดั ะธ ัะดะตะปะฐัั ััะพ-ะฝะธะฑัะดั ั ะพะฑัะตะบัะพะผ, ะบะพัะพััะน ะฒั
ะฒัะทัะฒะฐะตัะต ั ะฟะพะผะพััั yield_self ะธ ะบะฐะบะพะน ัะพ ะผะฐัะตัะธ :laughing:

ะัะธ ะฒะพะทะฒัะฐัะต ัะตะทัะปััะฐัะพะฒ ะฒะผะตััะพ ะธััะพะดะฝะพะณะพ ะพะฑัะตะบัะฐ.

ะัะธะผะตั :
```ruby
n_squared = ->(n) { n ** 2 }
2
.yield_self(&n_squared)
.yield_self(&n_squared)
# 16
```
ะ Ruby 2.6 ะตััั ะฟัะตะฒะดะพะฝะธะผ ะผะตัะพะดะฐ yield_self -> then.

ะะพ ะฝะต ะฟััะฐะนัะต ะตะณะพ ั ะพะฑััะฝัะผ yield.

ะกะฟะฐัะธะฑะพ ะทะฐ ะฟัะพััะตะฝะธะต!๐
